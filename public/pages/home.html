<!-- If user is not logged in -->
<div ng-if="!ctrl.user">
  <div class="login-screen">
    <h1>Learn Bivvy</h1>
    <form ng-submit="ctrl.login(userPass)">
      <input type="text" ng-model="userPass.username" placeholder="Username"><br/>
      <input type="password" ng-model="userPass.password" placeholder="Password"><br/>
      <input type="submit">
    </form>
    <div>{{ctrl.error}}</div>
  </div>
</div>

<!-- If user is logged in -->
<div ng-if="ctrl.user" class="container">
  <nav>
    <div>
      <h4 ng-click="ctrl.showPages()">Pages</h4>
      <h4 ng-click="ctrl.showLessons()">Lessons</h4>
    </div>
    <div>
      <h4 ng-click="ctrl.logout()">Logout</h4>
    </div>
  </nav>
  <div ng-if="ctrl.pagesDisplay">
    <h1 class="pages">Pages</h1>
    <div class="card-container">
      <div ng-repeat="service in ctrl.services" class="one-card" ng-click="ctrl.viewServices(service)">
        <h3>{{service.name}}</h3>
      </div>
    </div>
  </div>
  <div class="view-page-container">
    <div ng-if="ctrl.serviceInView">
      <h4><span ng-click="ctrl.showPages()">Pages </span> >>  {{ctrl.clickedService.name}}</h4>
      <h1>{{ctrl.clickedService.name}}</h1>
      <h3>Lessons</h3>
      <div class="table-of-lessons" ng-repeat="lesson in ctrl.clickedService.lessons">
        <div class="lesson-table">
          <h4>{{lesson.title}}</h4>
        </div>
        <img src="assets/x.svg" ng-click="ctrl.removeLesson(ctrl.clickedService, lesson)">
      </div>
      <div class="add-lesson" ng-click="ctrl.addLessonDisplayList()">Add Lesson</div>
      <div ng-if="ctrl.showListOfLessons" ng-repeat="lesson in ctrl.lessons">
        <h1>{{ctrl.message}}</h1>
        <h1>{{lesson.title}}</h1>
        <h1 ng-click="ctrl.addLessonToService(ctrl.clickedService, lesson.id)">+</h1>
      </div>
    </div>
  </div>
  <div class="view-page-container" ng-if="ctrl.lessonsDisplay">
    <div class="lesson-box">
      <h1>Lessons</h1>
      <div class="button" ng-click="ctrl.openAddLessonForm()"><h4>Create Lesson<h4></div>
    </div>
    <form ng-if="ctrl.lessonForm" ng-submit="ctrl.addLesson()">
      <input type="text" ng-model="ctrl.formDataLesson.title" placeholder="Title">
      <input type="text" ng-model="ctrl.formDataLesson.description" placeholder="Description">
      <input type="text" ng-model="ctrl.formDataLesson.video_url" placeholder="Video URL">
      <select ng-model="ctrl.formDataLesson.services">
        <option ng-repeat="service in ctrl.services" value="{{service.name}}">{{service.name}}</option>
      </select>
      <input type="submit"/>
    </form>
    <div class="table-of-lessons" ng-repeat="lesson in ctrl.lessons">
      <div ng-click="ctrl.viewLesson(lesson)" class="lesson-table">
        <h4>{{lesson.title}}<h4>
      </div>
      <img src="assets/x.svg" ng-click="ctrl.deleteLesson(lesson)">
    </div>
    <div ng-if="ctrl.viewedLesson">
      <h1>{{ctrl.clickedLesson.title}}</h1>
      <h4>{{ctrl.clickedLesson.description}}</h4>
      <h4>{{ctrl.clickedLesson.video_url}}</h4>
      <button type="button" name="edit" ng-click="ctrl.editModal = true; ctrl.thisLesson = lesson">Edit</button></td>
      <!-- <div class="dim" ng-class="(ctrl.editModal? 'editModal' : '')">
        <div class="modal">
          <h4 class="close" ng-click="ctrl.editModal = false">Close</h4>
          <form class="editModal" ng-submit="ctrl.editLesson(ctrl.thisLesson)">
            <div class="row">
              <input type="text" ng-model="ctrl.formDataLesson.title" placeholder="{{ctrl.thisLesson.title}}">
              <input type="text" ng-model="ctrl.formDataLesson.description" placeholder="{{ctrl.thisLesson.description}}">
              <input type="text" ng-model="ctrl.formDataLesson.video_url" placeholder="{{ctrl.thisLesson.video_url}}">
              <input ng-click="ctrl.editModal = false" type="submit"/>
            </div>
          </form>
        </div>
      </div> -->
      <button type="button" name="edit" ng-click="ctrl.openForm()">Edit</button>
      <form ng-if="ctrl.form" ng-submit="ctrl.editLesson(lesson)">
        <input type="text" ng-model="ctrl.formDataLesson.title" placeholder="Title">
        <input type="text" ng-model="ctrl.formDataLesson.description" placeholder="Description">
        <input type="text" ng-model="ctrl.formDataLesson.video_url" placeholder="Video URL">
        <input type="submit"/>
      </form>
      <button ng-click="ctrl.addTag()" type="button" name="button">Add Tag</button>
      <button class="remove" type="button" name="delete" ng-click="ctrl.deleteLesson(lesson)">Remove</button>
    </div>
  </div>
</div>

<!-- Add new page -->
<!-- <button type="button" name="add service" ng-click="ctrl.openAddServiceForm()">+</button>
<form ng-if="ctrl.serviceForm" ng-submit="ctrl.addService()">
  <input type="text" ng-model="ctrl.formDataService.name" placeholder="Name">
  <input type="submit"/>
</form> -->
<!-- edit and delete for one service -->
<!-- <button type="button" name="edit" ng-click="ctrl.openForm()">Edit</button>
<form ng-if="ctrl.form" ng-submit="ctrl.editService(service)">
<input type="text" ng-model="ctrl.formDataService.name" placeholder="Name">
<input type="submit"/>
</form>
<button class="remove" type="button" name="delete" ng-click="ctrl.deleteService(service)">Remove</button>
</div> -->
